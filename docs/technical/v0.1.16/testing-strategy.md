# TradingAgents-CN v0.1.16 测试策略

## 测试范围
- 后端API(功能/鉴权/限流)
- 队列系统(并发/重试/可见性超时)
- Worker执行(稳定性/错误处理)
- 进度流(SSE稳定性/断线重连)
- 前端页面(组件/路由/状态)
- E2E流程(提交->执行->报告)

## 测试分层
- 单元测试：pytest + httpx
- 集成测试：pytest-asyncio + Testcontainers(Redis/Mongo)
- 端到端：Playwright/Cypress
- 压力测试：k6/Locust

## 关键用例
- 单股分析提交成功并完成
- 批量分析并发=3，超出排队
- 任务取消与重试
- SSE进度在中断后自动恢复
- 权限隔离：不同用户互不影响
- 异常注入：Redis/Mongo间歇故障

## 覆盖率与质量门禁
- 语句覆盖率>=80%
- 关键模块分支覆盖率>=90%
- CI管道集成测试与静态检查

## 数据与环境
- 使用最小化Mock数据集
- 隔离测试环境与生产
- 随机化与幂等保